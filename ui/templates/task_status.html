<div id="task-status-{{ task.id }}" 
     hx-get="{{ url_for('task_bp.get_task_status_route', task_id=task.id) }}" 
     hx-trigger="every 2s" 
     hx-swap="outerHTML">

    {% if task.status == 'PENDING' or task.status == 'PROCESSING' %}
    <div class="p-4 rounded-md bg-blue-50 border border-blue-200">
        <div class="flex items-center">
            <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-blue-800"></div>
            <div class="ml-3">
                <p class="text-sm font-medium text-blue-800">Status: {{ task.status }}...</p>
                <p class="text-sm text-blue-700 mt-1">Your request is being processed. Please wait.</p>
            </div>
        </div>
    </div>
    {% elif task.status == 'COMPLETED' %}
    <div class="p-4 rounded-md bg-green-50 border border-green-200"
         hx-get="{{ url_for('results_bp.get_result', result_id=task.result_id) }}"
         hx-trigger="load"
         hx-target="this"
         hx-swap="innerHTML">
        <p class="text-green-800">Task complete! Loading results...</p>
    </div>
    {% elif task.status == 'FAILED' %}
    <div class="p-4 rounded-md bg-red-50 border border-red-200">
        <h3 class="text-sm font-medium text-red-800">Task Failed</h3>
        <p class="mt-2 text-sm text-red-700">{{ task.error_message or 'An unknown error occurred.' }}</p>
    </div>
    {% endif %}
</div>
