<!-- templates/tutor/tutor.html -->
{% extends "base.html" %}

{% block title %}מורה פרטי AI{% endblock %}

{% block content %}
<div class="space-y-8 text-right">
    <!-- Chat Card -->
    <div class="bg-white/80 p-6 rounded-2xl shadow-md">
        <div class="flex items-start space-x-4 space-x-reverse">
            <img src="{{ url_for('serve_avner', filename='avner_with_laptop.jpeg') }}" alt="אבנר מלמד" class="h-16 w-16 flex-shrink-0">
            <div>
                <h2 class="text-xl font-bold text-warm-brown">מורה פרטי AI</h2>
                <p class="text-ink-brown/80 mt-1">שאל אותי כל דבר על החומר שהעלית. אני אענה, אסביר, ואעזור לך להבין לעומק.</p>
            </div>
        </div>
        
        <div id="chat-container" class="mt-6">
            <div id="chat-history" class="h-96 overflow-y-auto p-4 border rounded-lg bg-warm-beige mb-4">
                <!-- Chat messages will appear here -->
                <div class="text-center text-gray-500">התחילו שיחה על ידי שאילת שאלה.</div>
            </div>
            
            <form id="tutor-form"
                  hx-post="{{ url_for('tutor_bp.ask_tutor') }}"
                  hx-target="#chat-history"
                  hx-swap="beforeend"
                  hx-indicator="#tutor-spinner">
                
                <input type="hidden" name="user_id" value="{{ current_user.id }}">
                <input type="hidden" name="course_id" value="default">
                
                <div class="flex gap-2">
                    <input type="text" name="question" class="flex-grow p-3 border rounded-lg text-right" placeholder="כתוב את שאלתך כאן...">
                    <button type="submit" class="bg-capy-orange text-white font-bold py-3 px-5 rounded-lg shadow-sm hover:bg-opacity-90">
                        שאל
                        <span id="tutor-spinner" class="htmx-indicator animate-spin">⚙️</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
