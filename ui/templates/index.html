{% extends "base.html" %}
{% block content %}
<div class="hero">
  <div class="hero-left">
    <!-- Avner big pose on left -->
    <img src="{{ url_for('static', filename='img/avner_laptop.png') }}" alt="××‘× ×¨ ×”-CapyBuddy ×™×•×©×‘ ××•×œ ×”××—×©×‘" class="avner-hero">
  </div>
  <div class="hero-right">
    <h1>×©×œ×•×! ×× ×™ ××‘× ×¨ ×”-CapyBuddy â€” ×›××Ÿ ×›×“×™ ×œ×¢×–×•×¨ ×œ×š ×œ×œ××•×“ ×‘×§×œ×•×ª.</h1>
    <p class="muted">×‘×—×¨ ×›×œ×™, ×”×¢×œ×” ×§×•×‘×¥ ××• ×”×“×‘×§ ×˜×§×¡×˜ ×•×”×ª×—×œ ×œ×œ××•×“.</p>
    
    <!-- Simple File Upload Form -->
    <div style="margin-top: 20px; padding: 20px; background: white; border-radius: 8px;">
      <form id="uploadForm" action="/api/upload/" method="post" enctype="multipart/form-data" style="text-align: right;">
        <div style="margin-bottom: 10px;">
          <label for="fileInput" style="display: block; margin-bottom: 5px; font-weight: bold;">×”×¢×œ×” ×§×•×‘×¥:</label>
          <input type="file" id="fileInput" name="file" accept=".pdf,.docx,.pptx,.txt,.html,.png,.jpg,.jpeg,.gif" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
        </div>
        <div style="margin-bottom: 10px;">
          <label for="textInput" style="display: block; margin-bottom: 5px; font-weight: bold;">××• ×”×“×‘×§ ×˜×§×¡×˜:</label>
          <textarea id="textInput" name="text" rows="4" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;" placeholder="×”×“×‘×§ ××ª ×”×˜×§×¡×˜ ×©×œ×š ×›××Ÿ..."></textarea>
        </div>
        <button type="submit" style="background: #6b5a4a; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">×”×¢×œ×”</button>
        <div id="uploadStatus" style="margin-top: 10px; display: none;"></div>
      </form>
    </div>
  </div>
</div>

<div class="tools-grid">
  <!-- 4 main cards -->
  <a href="{{ url_for('summary_tool') }}" class="tool-card tool-link">
    <img src="{{ url_for('static', filename='img/avner_thinking.png') }}" alt="××‘× ×¨ ×”-CapyBuddy ×—×•×©×‘" class="sticker">
    <h3>××¡×›×</h3>
    <p>×§×‘×œ ×¡×™×›×•× ×™×“×™×“×•×ª×™ ×•×××•×§×“ ×œ×˜×§×¡×˜×™× ×•×§×‘×¦×™×.</p>
  </a>
  <a href="{{ url_for('flashcards_tool') }}" class="tool-card tool-link">
    <img src="{{ url_for('static', filename='img/avner_book.png') }}" alt="××‘× ×¨ ×”-CapyBuddy ×¢× ×¡×¤×¨" class="sticker">
    <h3>×›×¨×˜×™×¡×™×•×ª</h3>
    <p>×™×™×¦×•×¨ ×›×¨×˜×™×¡×™×•×ª ×œ×–×™×›×¨×•×Ÿ ×•×ª×¨×’×•×œ ×××•×§×“.</p>
  </a>
  <a href="{{ url_for('assess_tool') }}" class="tool-card tool-link">
    <img src="{{ url_for('static', filename='img/avner_celebrate.png') }}" alt="××‘× ×¨ ×”-CapyBuddy ×—×•×’×’" class="sticker">
    <h3>×‘×—×Ÿ ××•×ª×™</h3>
    <p>×©××œ×•×ª ××™××•×Ÿ ××•×ª×××•×ª ×œ×¨××” ×©×œ×š.</p>
  </a>
  <a href="{{ url_for('homework_tool') }}" class="tool-card tool-link">
    <img src="{{ url_for('static', filename='img/avner_teaching.png') }}" alt="××‘× ×¨ ×”-CapyBuddy ××œ××“" class="sticker">
    <h3>×¢×•×–×¨ ×©×™×¢×•×¨×™×</h3>
    <p>×”×¡×‘×¨×™× ×™×“×™×“×•×ª×™×™× ×•×¦×¢×“Ö¾××¦×¢×“ ×œ×©×™×¢×•×¨×™ ×‘×™×ª.</p>
  </a>
  <!-- Additional tools -->
  <a href="{{ url_for('tutor_tool') }}" class="tool-card tool-link">
    <img src="{{ url_for('static', filename='img/avner_teaching.png') }}" alt="××‘× ×¨ ××œ××“" class="sticker">
    <h3>××•×¨×” ×¤×¨×˜×™ AI</h3>
    <p>×©××œ×• ××•×ª×™ ×›×œ ×“×‘×¨ ×¢×œ ×”×—×•××¨ ×©×œ×›×.</p>
  </a>
  <a href="{{ url_for('diagram_tool') }}" class="tool-card tool-link">
    <img src="{{ url_for('static', filename='img/avner_diagram.png') }}" alt="××‘× ×¨ ×¢× ×ª×¨×©×™×" class="sticker">
    <h3>×™×¦×™×¨×ª ×ª×¨×©×™××™×</h3>
    <p>×”×¤×™×›×ª ×˜×§×¡×˜ ××•×¨×›×‘ ×œ×ª×¨×©×™× ×•×™×–×•××œ×™ ×¤×©×•×˜.</p>
  </a>
  <a href="{{ url_for('glossary_page', course_id='default') }}" class="tool-card tool-link">
    <img src="{{ url_for('static', filename='img/avner_glossary.png') }}" alt="××‘× ×¨ ×¢× ××™×œ×•×Ÿ" class="sticker">
    <h3>××•× ×—×•×Ÿ</h3>
    <p>×›×œ ×”××•× ×—×™× ×”×—×©×•×‘×™× ××”×§×•×¨×¡×™× ×©×œ×›× ×‘××§×•× ××—×“.</p>
  </a>
  {% if current_user.is_authenticated %}
  <a href="{{ url_for('library.index') }}" class="tool-card tool-link">
    <img src="{{ url_for('static', filename='img/avner_book.png') }}" alt="××‘× ×¨ ×¢× ×¡×¤×¨×™×™×”" class="sticker">
    <h3>ğŸ“š ×”×¡×¤×¨×™×™×” ×©×œ×™</h3>
    <p>× ×™×”×•×œ ×§×•×¨×¡×™× ×•×§×‘×¦×™× ×‘××§×•× ××¨×›×–×™ ××—×“.</p>
  </a>
  {% endif %}
</div>

<script>
// Simple upload form handler
document.getElementById('uploadForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  const formData = new FormData(this);
  const statusDiv = document.getElementById('uploadStatus');
  
  statusDiv.style.display = 'block';
  statusDiv.innerHTML = '××¢×œ×”...';
  statusDiv.style.color = '#6b5a4a';
  
  try {
    const response = await fetch('/api/upload/', {
      method: 'POST',
      body: formData
    });
    
    const data = await response.json();
    
    if (response.ok) {
      statusDiv.innerHTML = 'âœ“ ×”×•×¢×œ×” ×‘×”×¦×œ×—×”! ' + data.filename;
      statusDiv.style.color = 'green';
      this.reset();
    } else {
      statusDiv.innerHTML = 'âœ— ×©×’×™××”: ' + (data.error || '××©×”×• ×”×©×ª×‘×©');
      statusDiv.style.color = 'red';
    }
  } catch (error) {
    statusDiv.innerHTML = 'âœ— ×©×’×™××” ×‘×”×¢×œ××”';
    statusDiv.style.color = 'red';
  }
});
</script>
{% endblock %}
